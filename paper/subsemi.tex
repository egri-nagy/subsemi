\documentclass{amsart}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{color,hyperref}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{tikz}
\usetikzlibrary{matrix,arrows,positioning,automata}

\definecolor{darkblue}{rgb}{0.0,0.0,0.3}
\definecolor{lgr}{rgb}{0.8,0.8,0.8}
\hypersetup{colorlinks,breaklinks,
            linkcolor=darkblue,urlcolor=darkblue,
            anchorcolor=darkblue,citecolor=darkblue}

\usepackage[norelsize,ruled,vlined,linesnumbered]{algorithm2e}

\newcommand{\cT}{{\mathcal T}}
\newcommand{\cS}{{\mathcal S}}
\newcommand{\Sub}{\mathbf{Sub}}
\newcommand{\Max}{\mathbf{Max}}
\newcommand{\compl}{\mathsf{c}}

\DeclareMathOperator{\Aut}{Aut}

\newcommand{\todo}[1]{ \small \textsf{[TODO:  #1 ]} \normalsize}


\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{Proposition}[theorem]{Proposition}
\newtheorem{cor}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

\newcommand{\SgpDec}{\textsc{SgpDec}}
\newcommand{\GAP}{\textsc{Gap}}
\newcommand{\Viz}{\textsc{Viz}}
\newcommand{\GraphViz}{\textsc{GraphViz}}



\begin{document}
\section{Notation}
%Let $(X,S)$ be a transformation semigroup, $n=|S|$.
Let $S$ be a semigroup, $n=|S|$.
We fix an order on the semigroup elements, $s_1,\ldots, s_n$, so we can easily refer to the elements by their indices. 
Then the  \emph{multiplication table}, or \emph{Cayley-table} of $S$ is a $n\times n$ matrix $M$ with entries from $\{1,..,n\}$ such that $M_{i,j}=k$ if $s_is_j=s_k$.
$\Sub(S)=\big\{T\mid T\leq S \big\}$ the set of all subsemigroups, $\Max(S)$ the set of maximal proper subsemigroups.
If $I$ is an ideal of $S$ then the \emph{Rees factor semigroup} $S/I$ has elements $S\setminus I\cup\{0\}$ with multiplication same as in $S$ except $I$ is replaced by zero.

$\cS_n$ denotes the symmetric group, $\cT_n$ the full transformation group on $n$ points.
\section{Useful facts}
We can simplify and parallelize enumerating subsemigroups by enumerating subsemigroups of its maximal subsemigroups and merge the results.
\begin{fact}
$\Sub(S)=\big( \bigcup_{T\in \Max(S)}\Sub(T)\big)\cup \{S\}$
\end{fact}
\proof
It follows from the fact that $\Sub(S)$ is an algebraic lattice.
\qed


Enumeration is truly parallel for an ideal and its corresponding factor semigroup followed by a combining the results.
\begin{lemma}
Let $I$ be an ideal of $S$, then $$\Sub(S)=\big\{\langle (T\setminus\{0\})\cup U \rangle\mid T\in \Sub(S/I), U\in\Sub(I)\big\}.$$
\end{lemma}
\proof

\qed

\begin{lemma}
$T\in\Sub(S)$ and $g\in \Aut(S)$ then $g^{-1}Tg\in\Sub(S)$.
\end{lemma}
\proof
Let $s,t\in T$ and $T'=g^{-1}Tg$.
$$g^{-1}sgg^{-1}tg=g^{-1}stg.$$
\qed




\section{Algorithms}
\begin{algorithm}
\SetKwInOut{Input}{input}\SetKwInOut{Output}{output}
\SetKwData{subs}{subs}
\SetKwFunction{SubSgps}{SubSgps}
\SetKwFunction{Extend}{Extend}
\Input{$S$ semigroup}
\Output{$\Sub(S)$}
\SetKwInOut{Name}{\SubSgps($S$)}
\BlankLine
\Name{}

\subs $\leftarrow$ $\varnothing$\;
\For{$s\in S$}{
      \Extend($\varnothing,s,S$,\subs)\;
    }
\Return{\subs}\;
\caption{The main loop for enumerating all subsemigroups of $S$ by recursively extending the empty semigroup by all elements of $S$.}
\label{alg:basicloop}
\end{algorithm}

\begin{algorithm}
\SetKwInOut{Input}{input}\SetKwInOut{Output}{output}
\SetKwData{subs}{subs}
\SetKwData{diff}{diff}
\SetKwFunction{Extend}{Extend}
\Input{$S$ semigroup, $T\leq S$, \subs, $s\in S$ }
\Output{\subs with all possible extensions of $T$ added}
\SetKwInOut{Name}{\Extend($T$,$s$,$S$,\subs)}
\BlankLine
\Name{}

$T'$ $\leftarrow$ $\langle T\cup\{s\}\rangle$\;
    \If{$T'\notin$ \subs}{
      \subs$\leftarrow$ \subs$\cup\{T'\}$\;
      \diff $\leftarrow$ $S\setminus T'$\;
      \For{$t\in$\diff}{
      \Extend($T',t,S$,\subs)\;
    }
  }
\caption{Ext}
\label{alg:basicextend}
\end{algorithm}


\section{Enumerating transformation semigroups of degree 2,3 and 4}

\end{document}